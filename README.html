<!DOCTYPE html>
<html>
<head>
    <title>WebSocket API [version 13]</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        .markdown-body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
        }

        @media (max-width: 767px) {
            .markdown-body {
                padding: 15px;
            }
        }

        .markdown-body {
            --base-size-4: 0.25rem;
            --base-size-8: 0.5rem;
            --base-size-16: 1rem;
            --base-size-24: 1.5rem;
            --base-size-40: 2.5rem;
            --base-text-weight-normal: 400;
            --base-text-weight-medium: 500;
            --base-text-weight-semibold: 600;
            --fontStack-monospace: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;
            --fgColor-accent: Highlight;
        }

        @media (prefers-color-scheme: dark) {
            .markdown-body, [data-theme="dark"] {
                /* dark */
                color-scheme: dark;
                --focus-outlineColor: #1f6feb;
                --fgColor-default: #f0f6fc;
                --fgColor-muted: #9198a1;
                --fgColor-accent: #4493f8;
                --fgColor-success: #3fb950;
                --fgColor-attention: #d29922;
                --fgColor-danger: #f85149;
                --fgColor-done: #ab7df8;
                --bgColor-default: #0d1117;
                --bgColor-muted: #151b23;
                --bgColor-neutral-muted: #656c7633;
                --bgColor-attention-muted: #bb800926;
                --borderColor-default: #3d444d;
                --borderColor-muted: #3d444db3;
                --borderColor-neutral-muted: #3d444db3;
                --borderColor-accent-emphasis: #1f6feb;
                --borderColor-success-emphasis: #238636;
                --borderColor-attention-emphasis: #9e6a03;
                --borderColor-danger-emphasis: #da3633;
                --borderColor-done-emphasis: #8957e5;
                --color-prettylights-syntax-comment: #9198a1;
                --color-prettylights-syntax-constant: #79c0ff;
                --color-prettylights-syntax-constant-other-reference-link: #a5d6ff;
                --color-prettylights-syntax-entity: #d2a8ff;
                --color-prettylights-syntax-storage-modifier-import: #f0f6fc;
                --color-prettylights-syntax-entity-tag: #7ee787;
                --color-prettylights-syntax-keyword: #ff7b72;
                --color-prettylights-syntax-string: #a5d6ff;
                --color-prettylights-syntax-variable: #ffa657;
                --color-prettylights-syntax-brackethighlighter-unmatched: #f85149;
                --color-prettylights-syntax-brackethighlighter-angle: #9198a1;
                --color-prettylights-syntax-invalid-illegal-text: #f0f6fc;
                --color-prettylights-syntax-invalid-illegal-bg: #8e1519;
                --color-prettylights-syntax-carriage-return-text: #f0f6fc;
                --color-prettylights-syntax-carriage-return-bg: #b62324;
                --color-prettylights-syntax-string-regexp: #7ee787;
                --color-prettylights-syntax-markup-list: #f2cc60;
                --color-prettylights-syntax-markup-heading: #1f6feb;
                --color-prettylights-syntax-markup-italic: #f0f6fc;
                --color-prettylights-syntax-markup-bold: #f0f6fc;
                --color-prettylights-syntax-markup-deleted-text: #ffdcd7;
                --color-prettylights-syntax-markup-deleted-bg: #67060c;
                --color-prettylights-syntax-markup-inserted-text: #aff5b4;
                --color-prettylights-syntax-markup-inserted-bg: #033a16;
                --color-prettylights-syntax-markup-changed-text: #ffdfb6;
                --color-prettylights-syntax-markup-changed-bg: #5a1e02;
                --color-prettylights-syntax-markup-ignored-text: #f0f6fc;
                --color-prettylights-syntax-markup-ignored-bg: #1158c7;
                --color-prettylights-syntax-meta-diff-range: #d2a8ff;
                --color-prettylights-syntax-sublimelinter-gutter-mark: #3d444d;
            }
        }

        @media (prefers-color-scheme: light) {
            .markdown-body, [data-theme="light"] {
                /* light */
                color-scheme: light;
                --focus-outlineColor: #0969da;
                --fgColor-default: #1f2328;
                --fgColor-muted: #59636e;
                --fgColor-accent: #0969da;
                --fgColor-success: #1a7f37;
                --fgColor-attention: #9a6700;
                --fgColor-danger: #d1242f;
                --fgColor-done: #8250df;
                --bgColor-default: #ffffff;
                --bgColor-muted: #f6f8fa;
                --bgColor-neutral-muted: #818b981f;
                --bgColor-attention-muted: #fff8c5;
                --borderColor-default: #d1d9e0;
                --borderColor-muted: #d1d9e0b3;
                --borderColor-neutral-muted: #d1d9e0b3;
                --borderColor-accent-emphasis: #0969da;
                --borderColor-success-emphasis: #1a7f37;
                --borderColor-attention-emphasis: #9a6700;
                --borderColor-danger-emphasis: #cf222e;
                --borderColor-done-emphasis: #8250df;
                --color-prettylights-syntax-comment: #59636e;
                --color-prettylights-syntax-constant: #0550ae;
                --color-prettylights-syntax-constant-other-reference-link: #0a3069;
                --color-prettylights-syntax-entity: #6639ba;
                --color-prettylights-syntax-storage-modifier-import: #1f2328;
                --color-prettylights-syntax-entity-tag: #0550ae;
                --color-prettylights-syntax-keyword: #cf222e;
                --color-prettylights-syntax-string: #0a3069;
                --color-prettylights-syntax-variable: #953800;
                --color-prettylights-syntax-brackethighlighter-unmatched: #82071e;
                --color-prettylights-syntax-brackethighlighter-angle: #59636e;
                --color-prettylights-syntax-invalid-illegal-text: #f6f8fa;
                --color-prettylights-syntax-invalid-illegal-bg: #82071e;
                --color-prettylights-syntax-carriage-return-text: #f6f8fa;
                --color-prettylights-syntax-carriage-return-bg: #cf222e;
                --color-prettylights-syntax-string-regexp: #116329;
                --color-prettylights-syntax-markup-list: #3b2300;
                --color-prettylights-syntax-markup-heading: #0550ae;
                --color-prettylights-syntax-markup-italic: #1f2328;
                --color-prettylights-syntax-markup-bold: #1f2328;
                --color-prettylights-syntax-markup-deleted-text: #82071e;
                --color-prettylights-syntax-markup-deleted-bg: #ffebe9;
                --color-prettylights-syntax-markup-inserted-text: #116329;
                --color-prettylights-syntax-markup-inserted-bg: #dafbe1;
                --color-prettylights-syntax-markup-changed-text: #953800;
                --color-prettylights-syntax-markup-changed-bg: #ffd8b5;
                --color-prettylights-syntax-markup-ignored-text: #d1d9e0;
                --color-prettylights-syntax-markup-ignored-bg: #0550ae;
                --color-prettylights-syntax-meta-diff-range: #8250df;
                --color-prettylights-syntax-sublimelinter-gutter-mark: #818b98;
            }
        }

        .markdown-body {
            -ms-text-size-adjust: 100%;
            -webkit-text-size-adjust: 100%;
            margin: 0;
            color: var(--fgColor-default);
            background-color: var(--bgColor-default);
            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";
            font-size: 16px;
            line-height: 1.5;
            word-wrap: break-word;
        }

            .markdown-body .octicon {
                display: inline-block;
                fill: currentColor;
                vertical-align: text-bottom;
            }

            .markdown-body h1:hover .anchor .octicon-link:before,
            .markdown-body h2:hover .anchor .octicon-link:before,
            .markdown-body h3:hover .anchor .octicon-link:before,
            .markdown-body h4:hover .anchor .octicon-link:before,
            .markdown-body h5:hover .anchor .octicon-link:before,
            .markdown-body h6:hover .anchor .octicon-link:before {
                width: 16px;
                height: 16px;
                content: ' ';
                display: inline-block;
                background-color: currentColor;
                -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
                mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
            }

            .markdown-body details,
            .markdown-body figcaption,
            .markdown-body figure {
                display: block;
            }

            .markdown-body summary {
                display: list-item;
            }

            .markdown-body [hidden] {
                display: none !important;
            }

            .markdown-body a {
                background-color: transparent;
                color: var(--fgColor-accent);
                text-decoration: none;
            }

            .markdown-body abbrWebSocket API [version 13] {
                border-bottom: none;
                -webkit-text-decoration: underline dotted;
                text-decoration: underline dotted;
            }

            .markdown-body b,
            .markdown-body strong {
                font-weight: var(--base-text-weight-semibold, 600);
            }

            .markdown-body dfn {
                font-style: italic;
            }

            .markdown-body h1 {
                margin: .67em 0;
                font-weight: var(--base-text-weight-semibold, 600);
                padding-bottom: .3em;
                font-size: 2em;
                border-bottom: 1px solid var(--borderColor-muted);
            }

            .markdown-body mark {
                background-color: var(--bgColor-attention-muted);
                color: var(--fgColor-default);
            }

            .markdown-body small {
                font-size: 90%;
            }

            .markdown-body sub,
            .markdown-body sup {
                font-size: 75%;
                line-height: 0;
                position: relative;
                vertical-align: baseline;
            }

            .markdown-body sub {
                bottom: -0.25em;
            }

            .markdown-body sup {
                top: -0.5em;
            }

            .markdown-body img {
                border-style: none;
                max-width: 100%;
                box-sizing: content-box;
            }

            .markdown-body code,
            .markdown-body kbd,
            .markdown-body pre,
            .markdown-body samp {
                font-family: monospace;
                font-size: 1em;
            }

            .markdown-body figure {
                margin: 1em var(--base-size-40);
            }

            .markdown-body hr {
                box-sizing: content-box;
                overflow: hidden;
                background: transparent;
                border-bottom: 1px solid var(--borderColor-muted);
                height: .25em;
                padding: 0;
                margin: var(--base-size-24) 0;
                background-color: var(--borderColor-default);
                border: 0;
            }

            .markdown-body input {
                font: inherit;
                margin: 0;
                overflow: visible;
                font-family: inherit;
                font-size: inherit;
                line-height: inherit;
            }

            .markdown-body [type=button],
            .markdown-body [type=reset],
            .markdown-body [type=submit] {
                -webkit-appearance: button;
                appearance: button;
            }

            .markdown-body [type=checkbox],
            .markdown-body [type=radio] {
                box-sizing: border-box;
                padding: 0;
            }

            .markdown-body [type=number]::-webkit-inner-spin-button,
            .markdown-body [type=number]::-webkit-outer-spin-button {
                height: auto;
            }

            .markdown-body [type=search]::-webkit-search-cancel-button,
            .markdown-body [type=search]::-webkit-search-decoration {
                -webkit-appearance: none;
                appearance: none;
            }

            .markdown-body ::-webkit-input-placeholder {
                color: inherit;
                opacity: .54;
            }

            .markdown-body ::-webkit-file-upload-button {
                -webkit-appearance: button;
                appearance: button;
                font: inherit;
            }

            .markdown-body a:hover {
                text-decoration: underline;
            }

            .markdown-body ::placeholder {
                color: var(--fgColor-muted);
                opacity: 1;
            }

            .markdown-body hr::before {
                display: table;
                content: "";
            }

            .markdown-body hr::after {
                display: table;
                clear: both;
                content: "";
            }

            .markdown-body table {
                border-spacing: 0;
                border-collapse: collapse;
                display: block;
                width: max-content;
                max-width: 100%;
                overflow: auto;
                font-variant: tabular-nums;
            }

            .markdown-body td,
            .markdown-body th {
                padding: 0;
            }

            .markdown-body details summary {
                cursor: pointer;
            }

            .markdown-body a:focus,
            .markdown-body [role=button]:focus,
            .markdown-body input[type=radio]:focus,
            .markdown-body input[type=checkbox]:focus {
                outline: 2px solid var(--focus-outlineColor);
                outline-offset: -2px;
                box-shadow: none;
            }

                .markdown-body a:focus:not(:focus-visible),
                .markdown-body [role=button]:focus:not(:focus-visible),
                .markdown-body input[type=radio]:focus:not(:focus-visible),
                .markdown-body input[type=checkbox]:focus:not(:focus-visible) {
                    outline: solid 1px transparent;
                }

            .markdown-body a:focus-visible,
            .markdown-body [role=button]:focus-visible,
            .markdown-body input[type=radio]:focus-visible,
            .markdown-body input[type=checkbox]:focus-visible {
                outline: 2px solid var(--focus-outlineColor);
                outline-offset: -2px;
                box-shadow: none;
            }

            .markdown-body a:not([class]):focus,
            .markdown-body a:not([class]):focus-visible,
            .markdown-body input[type=radio]:focus,
            .markdown-body input[type=radio]:focus-visible,
            .markdown-body input[type=checkbox]:focus,
            .markdown-body input[type=checkbox]:focus-visible {
                outline-offset: 0;
            }

            .markdown-body kbd {
                display: inline-block;
                padding: var(--base-size-4);
                font: 11px var(--fontStack-monospace, ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace);
                line-height: 10px;
                color: var(--fgColor-default);
                vertical-align: middle;
                background-color: var(--bgColor-muted);
                border: solid 1px var(--borderColor-neutral-muted);
                border-bottom-color: var(--borderColor-neutral-muted);
                border-radius: 6px;
                box-shadow: inset 0 -1px 0 var(--borderColor-neutral-muted);
            }

            .markdown-body h1,
            .markdown-body h2,
            .markdown-body h3,
            .markdown-body h4,
            .markdown-body h5,
            .markdown-body h6 {
                margin-top: var(--base-size-24);
                margin-bottom: var(--base-size-16);
                font-weight: var(--base-text-weight-semibold, 600);
                line-height: 1.25;
            }

            .markdown-body h2 {
                font-weight: var(--base-text-weight-semibold, 600);
                padding-bottom: .3em;
                font-size: 1.5em;
                border-bottom: 1px solid var(--borderColor-muted);
            }

            .markdown-body h3 {
                font-weight: var(--base-text-weight-semibold, 600);
                font-size: 1.25em;
            }

            .markdown-body h4 {
                font-weight: var(--base-text-weight-semibold, 600);
                font-size: 1em;
            }

            .markdown-body h5 {
                font-weight: var(--base-text-weight-semibold, 600);
                font-size: .875em;
            }

            .markdown-body h6 {
                font-weight: var(--base-text-weight-semibold, 600);
                font-size: .85em;
                color: var(--fgColor-muted);
            }

            .markdown-body p {
                margin-top: 0;
                margin-bottom: 10px;
            }

            .markdown-body blockquote {
                margin: 0;
                padding: 0 1em;
                color: var(--fgColor-muted);
                border-left: .25em solid var(--borderColor-default);
            }

            .markdown-body ul,
            .markdown-body ol {
                margin-top: 0;
                margin-bottom: 0;
                padding-left: 2em;
            }

                .markdown-body ol ol,
                .markdown-body ul ol {
                    list-style-type: lower-roman;
                }

                    .markdown-body ul ul ol,
                    .markdown-body ul ol ol,
                    .markdown-body ol ul ol,
                    .markdown-body ol ol ol {
                        list-style-type: lower-alpha;
                    }

            .markdown-body dd {
                margin-left: 0;
            }

            .markdown-body tt,
            .markdown-body code,
            .markdown-body samp {
                font-family: var(--fontStack-monospace, ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace);
                font-size: 12px;
            }

            .markdown-body pre {
                margin-top: 0;
                margin-bottom: 0;
                font-family: var(--fontStack-monospace, ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace);
                font-size: 12px;
                word-wrap: normal;
            }

            .markdown-body .octicon {
                display: inline-block;
                overflow: visible !important;
                vertical-align: text-bottom;
                fill: currentColor;
            }

            .markdown-body input::-webkit-outer-spin-button,
            .markdown-body input::-webkit-inner-spin-button {
                margin: 0;
                appearance: none;
            }

            .markdown-body .mr-2 {
                margin-right: var(--base-size-8, 8px) !important;
            }

            .markdown-body::before {
                display: table;
                content: "";
            }

            .markdown-body::after {
                display: table;
                clear: both;
                content: "";
            }

            .markdown-body > *:first-child {
                margin-top: 0 !important;
            }

            .markdown-body > *:last-child {
                margin-bottom: 0 !important;
            }

            .markdown-body a:not([href]) {
                color: inherit;
                text-decoration: none;
            }

            .markdown-body .absent {
                color: var(--fgColor-danger);
            }

            .markdown-body .anchor {
                float: left;
                padding-right: var(--base-size-4);
                margin-left: -20px;
                line-height: 1;
            }

                .markdown-body .anchor:focus {
                    outline: none;
                }

            .markdown-body p,
            .markdown-body blockquote,
            .markdown-body ul,
            .markdown-body ol,
            .markdown-body dl,
            .markdown-body table,
            .markdown-body pre,
            .markdown-body details {
                margin-top: 0;
                margin-bottom: var(--base-size-16);
            }

                .markdown-body blockquote > :first-child {
                    margin-top: 0;
                }

                .markdown-body blockquote > :last-child {
                    margin-bottom: 0;
                }

            .markdown-body h1 .octicon-link,
            .markdown-body h2 .octicon-link,
            .markdown-body h3 .octicon-link,
            .markdown-body h4 .octicon-link,
            .markdown-body h5 .octicon-link,
            .markdown-body h6 .octicon-link {
                color: var(--fgColor-default);
                vertical-align: middle;
                visibility: hidden;
            }

            .markdown-body h1:hover .anchor,
            .markdown-body h2:hover .anchor,
            .markdown-body h3:hover .anchor,
            .markdown-body h4:hover .anchor,
            .markdown-body h5:hover .anchor,
            .markdown-body h6:hover .anchor {
                text-decoration: none;
            }

                .markdown-body h1:hover .anchor .octicon-link,
                .markdown-body h2:hover .anchor .octicon-link,
                .markdown-body h3:hover .anchor .octicon-link,
                .markdown-body h4:hover .anchor .octicon-link,
                .markdown-body h5:hover .anchor .octicon-link,
                .markdown-body h6:hover .anchor .octicon-link {
                    visibility: visible;
                }

            .markdown-body h1 tt,
            .markdown-body h1 code,
            .markdown-body h2 tt,
            .markdown-body h2 code,
            .markdown-body h3 tt,
            .markdown-body h3 code,
            .markdown-body h4 tt,
            .markdown-body h4 code,
            .markdown-body h5 tt,
            .markdown-body h5 code,
            .markdown-body h6 tt,
            .markdown-body h6 code {
                padding: 0 .2em;
                font-size: inherit;
            }

            .markdown-body summary h1,
            .markdown-body summary h2,
            .markdown-body summary h3,
            .markdown-body summary h4,
            .markdown-body summary h5,
            .markdown-body summary h6 {
                display: inline-block;
            }

                .markdown-body summary h1 .anchor,
                .markdown-body summary h2 .anchor,
                .markdown-body summary h3 .anchor,
                .markdown-body summary h4 .anchor,
                .markdown-body summary h5 .anchor,
                .markdown-body summary h6 .anchor {
                    margin-left: -40px;
                }

            .markdown-body summary h1,
            .markdown-body summary h2 {
                padding-bottom: 0;
                border-bottom: 0;
            }

            .markdown-body ul.no-list,
            .markdown-body ol.no-list {
                padding: 0;
                list-style-type: none;
            }

            .markdown-body ol[type="a s"] {
                list-style-type: lower-alpha;
            }

            .markdown-body ol[type="A s"] {
                list-style-type: upper-alpha;
            }

            .markdown-body ol[type="i s"] {
                list-style-type: lower-roman;
            }

            .markdown-body ol[type="I s"] {
                list-style-type: upper-roman;
            }

            .markdown-body ol[type="1"] {
                list-style-type: decimal;
            }

            .markdown-body div > ol:not([type]) {
                list-style-type: decimal;
            }

            .markdown-body ul ul,
            .markdown-body ul ol,
            .markdown-body ol ol,
            .markdown-body ol ul {
                margin-top: 0;
                margin-bottom: 0;
            }

            .markdown-body li > p {
                margin-top: var(--base-size-16);
            }

            .markdown-body li + li {
                margin-top: .25em;
            }

            .markdown-body dl {
                padding: 0;
            }

                .markdown-body dl dt {
                    padding: 0;
                    margin-top: var(--base-size-16);
                    font-size: 1em;
                    font-style: italic;
                    font-weight: var(--base-text-weight-semibold, 600);
                }

                .markdown-body dl dd {
                    padding: 0 var(--base-size-16);
                    margin-bottom: var(--base-size-16);
                }

            .markdown-body table th {
                font-weight: var(--base-text-weight-semibold, 600);
            }

            .markdown-body table th,
            .markdown-body table td {
                padding: 6px 13px;
                border: 1px solid var(--borderColor-default);
            }

                .markdown-body table td > :last-child {
                    margin-bottom: 0;
                }

            .markdown-body table tr {
                background-color: var(--bgColor-default);
                border-top: 1px solid var(--borderColor-muted);
            }

                .markdown-body table tr:nth-child(2n) {
                    background-color: var(--bgColor-muted);
                }

            .markdown-body table img {
                background-color: transparent;
            }

            .markdown-body img[align=right] {
                padding-left: 20px;
            }

            .markdown-body img[align=left] {
                padding-right: 20px;
            }

            .markdown-body .emoji {
                max-width: none;
                vertical-align: text-top;
                background-color: transparent;
            }

            .markdown-body span.frame {
                display: block;
                overflow: hidden;
            }

                .markdown-body span.frame > span {
                    display: block;
                    float: left;
                    width: auto;
                    padding: 7px;
                    margin: 13px 0 0;
                    overflow: hidden;
                    border: 1px solid var(--borderColor-default);
                }

                .markdown-body span.frame span img {
                    display: block;
                    float: left;
                }

                .markdown-body span.frame span span {
                    display: block;
                    padding: 5px 0 0;
                    clear: both;
                    color: var(--fgColor-default);
                }

            .markdown-body span.align-center {
                display: block;
                overflow: hidden;
                clear: both;
            }

                .markdown-body span.align-center > span {
                    display: block;
                    margin: 13px auto 0;
                    overflow: hidden;
                    text-align: center;
                }

                .markdown-body span.align-center span img {
                    margin: 0 auto;
                    text-align: center;
                }

            .markdown-body span.align-right {
                display: block;
                overflow: hidden;
                clear: both;
            }

                .markdown-body span.align-right > span {
                    display: block;
                    margin: 13px 0 0;
                    overflow: hidden;
                    text-align: right;
                }

                .markdown-body span.align-right span img {
                    margin: 0;
                    text-align: right;
                }

            .markdown-body span.float-left {
                display: block;
                float: left;
                margin-right: 13px;
                overflow: hidden;
            }

                .markdown-body span.float-left span {
                    margin: 13px 0 0;
                }

            .markdown-body span.float-right {
                display: block;
                float: right;
                margin-left: 13px;
                overflow: hidden;
            }

                .markdown-body span.float-right > span {
                    display: block;
                    margin: 13px auto 0;
                    overflow: hidden;
                    text-align: right;
                }

            .markdown-body code,
            .markdown-body tt {
                padding: .2em .4em;
                margin: 0;
                font-size: 85%;
                white-space: break-spaces;
                background-color: var(--bgColor-neutral-muted);
                border-radius: 6px;
            }

                .markdown-body code br,
                .markdown-body tt br {
                    display: none;
                }

            .markdown-body del code {
                text-decoration: inherit;
            }

            .markdown-body samp {
                font-size: 85%;
            }

            .markdown-body pre code {
                font-size: 100%;
            }

            .markdown-body pre > code {
                padding: 0;
                margin: 0;
                word-break: normal;
                white-space: pre;
                background: transparent;
                border: 0;
            }

            .markdown-body .highlight {
                margin-bottom: var(--base-size-16);
            }

                .markdown-body .highlight pre {
                    margin-bottom: 0;
                    word-break: normal;
                }

                .markdown-body .highlight pre,
                .markdown-body pre {
                    padding: var(--base-size-16);
                    overflow: auto;
                    font-size: 85%;
                    line-height: 1.45;
                    color: var(--fgColor-default);
                    background-color: var(--bgColor-muted);
                    border-radius: 6px;
                }

                    .markdown-body pre code,
                    .markdown-body pre tt {
                        display: inline;
                        max-width: auto;
                        padding: 0;
                        margin: 0;
                        overflow: visible;
                        line-height: inherit;
                        word-wrap: normal;
                        background-color: transparent;
                        border: 0;
                    }

            .markdown-body .csv-data td,
            .markdown-body .csv-data th {
                padding: 5px;
                overflow: hidden;
                font-size: 12px;
                line-height: 1;
                text-align: left;
                white-space: nowrap;
            }

            .markdown-body .csv-data .blob-num {
                padding: 10px var(--base-size-8) 9px;
                text-align: right;
                background: var(--bgColor-default);
                border: 0;
            }

            .markdown-body .csv-data tr {
                border-top: 0;
            }

            .markdown-body .csv-data th {
                font-weight: var(--base-text-weight-semibold, 600);
                background: var(--bgColor-muted);
                border-top: 0;
            }

            .markdown-body [data-footnote-ref]::before {
                content: "[";
            }

            .markdown-body [data-footnote-ref]::after {
                content: "]";
            }

            .markdown-body .footnotes {
                font-size: 12px;
                color: var(--fgColor-muted);
                border-top: 1px solid var(--borderColor-default);
            }

                .markdown-body .footnotes ol {
                    padding-left: var(--base-size-16);
                }

                    .markdown-body .footnotes ol ul {
                        display: inline-block;
                        padding-left: var(--base-size-16);
                        margin-top: var(--base-size-16);
                    }

                .markdown-body .footnotes li {
                    position: relative;
                }

                    .markdown-body .footnotes li:target::before {
                        position: absolute;
                        top: calc(var(--base-size-8)*-1);
                        right: calc(var(--base-size-8)*-1);
                        bottom: calc(var(--base-size-8)*-1);
                        left: calc(var(--base-size-24)*-1);
                        pointer-events: none;
                        content: "";
                        border: 2px solid var(--borderColor-accent-emphasis);
                        border-radius: 6px;
                    }

                    .markdown-body .footnotes li:target {
                        color: var(--fgColor-default);
                    }

                .markdown-body .footnotes .data-footnote-backref g-emoji {
                    font-family: monospace;
                }

            .markdown-body body:has(:modal) {
                padding-right: var(--dialog-scrollgutter) !important;
            }

            .markdown-body .pl-c {
                color: var(--color-prettylights-syntax-comment);
            }

            .markdown-body .pl-c1,
            .markdown-body .pl-s .pl-v {
                color: var(--color-prettylights-syntax-constant);
            }

            .markdown-body .pl-e,
            .markdown-body .pl-en {
                color: var(--color-prettylights-syntax-entity);
            }

            .markdown-body .pl-smi,
            .markdown-body .pl-s .pl-s1 {
                color: var(--color-prettylights-syntax-storage-modifier-import);
            }

            .markdown-body .pl-ent {
                color: var(--color-prettylights-syntax-entity-tag);
            }

            .markdown-body .pl-k {
                color: var(--color-prettylights-syntax-keyword);
            }

            .markdown-body .pl-s,
            .markdown-body .pl-pds,
            .markdown-body .pl-s .pl-pse .pl-s1,
            .markdown-body .pl-sr,
            .markdown-body .pl-sr .pl-cce,
            .markdown-body .pl-sr .pl-sre,
            .markdown-body .pl-sr .pl-sra {
                color: var(--color-prettylights-syntax-string);
            }

            .markdown-body .pl-v,
            .markdown-body .pl-smw {
                color: var(--color-prettylights-syntax-variable);
            }

            .markdown-body .pl-bu {
                color: var(--color-prettylights-syntax-brackethighlighter-unmatched);
            }

            .markdown-body .pl-ii {
                color: var(--color-prettylights-syntax-invalid-illegal-text);
                background-color: var(--color-prettylights-syntax-invalid-illegal-bg);
            }

            .markdown-body .pl-c2 {
                color: var(--color-prettylights-syntax-carriage-return-text);
                background-color: var(--color-prettylights-syntax-carriage-return-bg);
            }

            .markdown-body .pl-sr .pl-cce {
                font-weight: bold;
                color: var(--color-prettylights-syntax-string-regexp);
            }

            .markdown-body .pl-ml {
                color: var(--color-prettylights-syntax-markup-list);
            }

            .markdown-body .pl-mh,
            .markdown-body .pl-mh .pl-en,
            .markdown-body .pl-ms {
                font-weight: bold;
                color: var(--color-prettylights-syntax-markup-heading);
            }

            .markdown-body .pl-mi {
                font-style: italic;
                color: var(--color-prettylights-syntax-markup-italic);
            }

            .markdown-body .pl-mb {
                font-weight: bold;
                color: var(--color-prettylights-syntax-markup-bold);
            }

            .markdown-body .pl-md {
                color: var(--color-prettylights-syntax-markup-deleted-text);
                background-color: var(--color-prettylights-syntax-markup-deleted-bg);
            }

            .markdown-body .pl-mi1 {
                color: var(--color-prettylights-syntax-markup-inserted-text);
                background-color: var(--color-prettylights-syntax-markup-inserted-bg);
            }

            .markdown-body .pl-mc {
                color: var(--color-prettylights-syntax-markup-changed-text);
                background-color: var(--color-prettylights-syntax-markup-changed-bg);
            }

            .markdown-body .pl-mi2 {
                color: var(--color-prettylights-syntax-markup-ignored-text);
                background-color: var(--color-prettylights-syntax-markup-ignored-bg);
            }

            .markdown-body .pl-mdr {
                font-weight: bold;
                color: var(--color-prettylights-syntax-meta-diff-range);
            }

            .markdown-body .pl-ba {
                color: var(--color-prettylights-syntax-brackethighlighter-angle);
            }

            .markdown-body .pl-sg {
                color: var(--color-prettylights-syntax-sublimelinter-gutter-mark);
            }

            .markdown-body .pl-corl {
                text-decoration: underline;
                color: var(--color-prettylights-syntax-constant-other-reference-link);
            }

            .markdown-body [role=button]:focus:not(:focus-visible),
            .markdown-body [role=tabpanel][tabindex="0"]:focus:not(:focus-visible),
            .markdown-body button:focus:not(:focus-visible),
            .markdown-body summary:focus:not(:focus-visible),
            .markdown-body a:focus:not(:focus-visible) {
                outline: none;
                box-shadow: none;
            }

            .markdown-body [tabindex="0"]:focus:not(:focus-visible),
            .markdown-body details-dialog:focus:not(:focus-visible) {
                outline: none;
            }

            .markdown-body g-emoji {
                display: inline-block;
                min-width: 1ch;
                font-family: "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
                font-size: 1em;
                font-style: normal !important;
                font-weight: var(--base-text-weight-normal, 400);
                line-height: 1;
                vertical-align: -0.075em;
            }

                .markdown-body g-emoji img {
                    width: 1em;
                    height: 1em;
                }

            .markdown-body .task-list-item {
                list-style-type: none;
            }

                .markdown-body .task-list-item label {
                    font-weight: var(--base-text-weight-normal, 400);
                }

                .markdown-body .task-list-item.enabled label {
                    cursor: pointer;
                }

                .markdown-body .task-list-item + .task-list-item {
                    margin-top: var(--base-size-4);
                }

                .markdown-body .task-list-item .handle {
                    display: none;
                }

            .markdown-body .task-list-item-checkbox {
                margin: 0 .2em .25em -1.4em;
                vertical-align: middle;
            }

            .markdown-body ul:dir(rtl) .task-list-item-checkbox {
                margin: 0 -1.6em .25em .2em;
            }

            .markdown-body ol:dir(rtl) .task-list-item-checkbox {
                margin: 0 -1.6em .25em .2em;
            }

            .markdown-body .contains-task-list:hover .task-list-item-convert-container,
            .markdown-body .contains-task-list:focus-within .task-list-item-convert-container {
                display: block;
                width: auto;
                height: 24px;
                overflow: visible;
                clip: auto;
            }

            .markdown-body ::-webkit-calendar-picker-indicator {
                filter: invert(50%);
            }

            .markdown-body .markdown-alert {
                padding: var(--base-size-8) var(--base-size-16);
                margin-bottom: var(--base-size-16);
                color: inherit;
                border-left: .25em solid var(--borderColor-default);
            }

                .markdown-body .markdown-alert > :first-child {
                    margin-top: 0;
                }

                .markdown-body .markdown-alert > :last-child {
                    margin-bottom: 0;
                }

                .markdown-body .markdown-alert .markdown-alert-title {
                    display: flex;
                    font-weight: var(--base-text-weight-medium, 500);
                    align-items: center;
                    line-height: 1;
                }

                .markdown-body .markdown-alert.markdown-alert-note {
                    border-left-color: var(--borderColor-accent-emphasis);
                }

                    .markdown-body .markdown-alert.markdown-alert-note .markdown-alert-title {
                        color: var(--fgColor-accent);
                    }

                .markdown-body .markdown-alert.markdown-alert-important {
                    border-left-color: var(--borderColor-done-emphasis);
                }

                    .markdown-body .markdown-alert.markdown-alert-important .markdown-alert-title {
                        color: var(--fgColor-done);
                    }

                .markdown-body .markdown-alert.markdown-alert-warning {
                    border-left-color: var(--borderColor-attention-emphasis);
                }

                    .markdown-body .markdown-alert.markdown-alert-warning .markdown-alert-title {
                        color: var(--fgColor-attention);
                    }

                .markdown-body .markdown-alert.markdown-alert-tip {
                    border-left-color: var(--borderColor-success-emphasis);
                }

                    .markdown-body .markdown-alert.markdown-alert-tip .markdown-alert-title {
                        color: var(--fgColor-success);
                    }

                .markdown-body .markdown-alert.markdown-alert-caution {
                    border-left-color: var(--borderColor-danger-emphasis);
                }

                    .markdown-body .markdown-alert.markdown-alert-caution .markdown-alert-title {
                        color: var(--fgColor-danger);
                    }

            .markdown-body > *:first-child > .heading-element:first-child {
                margin-top: 0 !important;
            }

            .markdown-body .highlight pre:has(+.zeroclipboard-container) {
                min-height: 52px;
            }
    </style>
</head>
<body>
    <div class="row w-100">
<div class="col-3 d-none d-lg-inline">
<div class="sticky-top overflow-auto vh-100">
<div id="list-headers" class="list-group mt-5">
<ul>
<li><a href="#websocket-api-version-13"><strong>WebSocket API</strong></a>
<ul>
<li><a href="#description">Description</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#testing">Testing</a></li>
<li><a href="#usage">Usage</a></li>
</ul>
</li>
<li><a href="#websocket"><strong>WebSocket</strong> - interface</a>
<ul>
<li><a href="#create-of-websocket">Create new instance</a></li>
<li><a href="#static-properties-of-websocket">Static properties</a></li>
<li><a href="#instance-properties-of-websocket">Instance properties</a></li>
<li><a href="#instance-methods-of-websocket">Instance methods</a></li>
<li><a href="#events-of-websocket">Events</a></li>
</ul>
</li>
<li><a href="#ready-state-constants"><strong>Ready state constants</strong></a></li>
<li><a href="#extension"><strong>Extension</strong> - interface</a>
<ul>
<li><a href="#create-of-extension">Create new instance</a></li>
<li><a href="#instance-methods-of-extension">Instance methods</a></li>
</ul>
</li>
<li><a href="#frame"><strong>Frame</strong> - interface</a>
<ul>
<li><a href="#instance-properties-of-frame">Instance properties</a></li>
</ul>
</li>
<li><a href="#license"><strong>License</strong></a></li>
</ul>
</div>
</div>
</div>
 
<div class="col">
<div class="p-2 markdown-body" data-bs-spy="scroll" data-bs-target="#list-headers" data-bs-offset="0" tabindex="0">
<h1 id="websocket-api-version-13">WebSocket API [version 13]</h1>
<p>This manual is also available in <a href="https://manuel-lohmus.github.io/ws13/README.html">HTML5</a>.<br></p>
<!--[![npm-version](https://badgen.net/npm/v/ws13)](https://www.npmjs.com/package/ws13)-->
<h2 id="description">Description</h2>
<p>The WebSocket API is an advanced technology that makes it
possible to open a two-way interactive communication session
between the user's browser and a server. With this API,
you can send messages to a server and receive event-driven
responses without having to poll the server for a reply.</p>
<p>Common use cases for the WebSocket API include:</p>
<ol>
<li><p><strong>Real-time updates:</strong> Applications that require real-time data updates, such as live sports scores, stock market updates, or live news feeds.</p>
</li>
<li><p><strong>Chat applications:</strong> Instant messaging and chat applications where low latency and real-time communication are crucial.</p>
</li>
<li><p><strong>Online gaming:</strong> Multiplayer online games that need real-time interaction between players.</p>
</li>
<li><p><strong>Collaborative tools:</strong> Applications like collaborative document editing, where multiple users need to see changes in real-time.</p>
</li>
<li><p><strong>IoT (Internet of Things):</strong> Communication between IoT devices and servers for real-time data exchange and control.</p>
</li>
<li><p><strong>Live streaming:</strong> Streaming live audio, video, or other media content to clients.</p>
</li>
<li><p><strong>Notifications:</strong> Sending real-time notifications to users, such as alerts or updates in web applications.
These use cases benefit from WebSocket's ability to maintain a persistent connection, allowing for efficient and low-latency communication between the client and server.</p>
</li>
</ol>
<p>The WebSocket API is defined by the <a href="https://html.spec.whatwg.org/multipage/web-sockets.html#the-websocket-interface">WebSocket</a> interface, which is part of the <a href="https://html.spec.whatwg.org/multipage/">HTML Living Standard</a>. The API provides a set of methods, properties, and events that enable developers to create WebSocket connections and interact with them in a web application.</p>
<h2 id="features">Features</h2>
<p>The WebSocket API offers several key features that make it a powerful tool for building real-time web applications:</p>
<ol>
<li><p><strong>Full-duplex communication</strong>: WebSockets enable full-duplex communication between the client and server, allowing both parties to send and receive messages simultaneously. This bidirectional communication is essential for real-time applications that require low latency and high interactivity.</p>
</li>
<li><p><strong>Persistent connection</strong>: Unlike traditional HTTP connections, which are stateless and short-lived, WebSocket connections are persistent and long-lived. Once established, a WebSocket connection remains open until either the client or server decides to close it. This persistent connection eliminates the need to establish a new connection for each message, reducing latency and overhead.</p>
</li>
<li><p><strong>Low latency</strong>: WebSockets provide low-latency communication by eliminating the need for repeated handshakes and headers in each message exchange. This efficiency allows real-time data to be transmitted quickly and responsively, making WebSockets ideal for applications that require instant updates and notifications.</p>
</li>
<li><p><strong>Efficient data transfer</strong>: WebSockets use a binary messaging format that is more compact and efficient than text-based formats like JSON or XML. This binary format reduces the size of messages sent over the network, improving performance and reducing bandwidth consumption.</p>
</li>
<li><p><strong>Cross-origin communication</strong>: WebSockets support cross-origin communication, allowing clients to establish connections with servers hosted on different domains. This feature enables developers to build distributed systems and integrate services from multiple sources in a secure and controlled manner.</p>
</li>
<li><p><strong>Secure communication</strong>: WebSockets can be used over secure connections (wss://) to encrypt data transmitted between the client and server. This encryption ensures that sensitive information is protected from eavesdropping and tampering, making WebSockets a secure choice for transmitting confidential data.</p>
</li>
<li><p><strong>Event-driven architecture</strong>: The WebSocket API is event-driven, meaning that clients and servers can respond to specific events, such as message reception, connection establishment, or connection closure. This event-driven architecture simplifies the development of real-time applications by providing a clear and structured way to handle asynchronous communication.</p>
</li>
</ol>
<h2 id="installation">Installation</h2>
<p>You can install <code>ws13</code> using this command:</p>
<p><code>npm install ws13</code></p>
<h2 id="testing">Testing</h2>
<p>You can test <code>ws13</code> on your system using this command:</p>
<p><code>node ./node_modules/ws13/index.test</code></p>
<p>or in the <code>ws13</code> project directory:</p>
<p><code>npm test</code></p>
<h2 id="usage">Usage</h2>
<p><code>ws13</code> support ESM and CJS module format in Node.js</p>
<pre><code class="language-js">import createWebSocket from 'ws13';
// or
const createWebSocket = require('ws13');
</code></pre>
<p><strong>Example of use on a server</strong></p>
<pre><code class="language-js">const { createServer } = require('node:http');
const createWebSocket = require('ws13');

const server = createServer();
let wsList = [];

server.on('upgrade', function (request) {

    // upgrade WebSocket
    const websocket = createWebSocket({ request });

    // has WebSocket, the handshake is done
    if (websocket) {

        // inserts a WebSocket from the list
        wsList.push(websocket);

        // add listeners
        websocket
            .on('error', console.error)
            .on('open', function () {
                /* now you can send and receive messages */
            })
            .on('message', function (event) {
                // send to everyone
                wsList.forEach((ws) =&gt; { ws.send(event.data); });
            })
            .on('close', function () {
                // removing a WebSocket from the list
                wsList = wsList.filter(ws =&gt; ws !== websocket);
            });
    } else {
        // handshake not accepted
        request.destroy();
    }
});

</code></pre>
<p><strong>Example of use as a client</strong></p>
<p>In the client role, a browser-compatible implementation of
<a href="https://nodejs.org/docs/latest/api/http.html#websocket">WebSocket</a>
should be preferred, which should provide better results.</p>
<p>If it is important that the same code runs on the client and server side,
then do the following.</p>
<pre><code class="language-js">const http = require('node:http');
const createWebSocket = require('ws13');

const ws = createWebSocket({
    request: http.request({
        hostname: '127.0.0.1',
        port: 80,
        path: '/test'
    })
})
    .on('error', console.error)
    .on('open', function () {
        /* now you can send and receive messages */
        ws.heartbeat(function (latency_ms) { console.log('client latency_ms', latency_ms); });
        ws.send('Hello, World!');
    })
    .on('message', function (event) { console.log('client data', event.data); })
    .on('ping', function (event) { console.log('client ping', event); })
    .on('pong', function (event) { console.log('client pong', event); })
    .on('close', function () { console.log('client websocket is closed'); });
</code></pre>
<p><strong>Example of use as a client in the browser</strong></p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;WebSocket&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        const ws = new WebSocket('ws://localhost:3000/test');
        ws.onopen = function () {
            ws.send('Hello, World!');
        };
        ws.onmessage = function (event) {
            console.log('server data', event.data);
        };
        ws.onclose = function () {
            console.log('client websocket is closed');
        };
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Complete example of use on the server and client side can be found in the <a href="https://github.com/manuel-lohmus/ws13/tree/master/examples/chat">examples/chat</a> directory.</p>
<p><strong>Secure communication</strong></p>
<p>To use secure communication, you need to use the <code>https</code> module and the <code>wss</code> protocol.</p>
<p><strong>Example of use on a <code>https</code> server</strong></p>
<pre><code class="language-js">const { createServer } = require('node:https');
const createWebSocket = require('ws13');

const server = createServer({
    // path to the key and certificate
    key: fs.readFileSync('server-key.pem'),
    cert: fs.readFileSync('server-cert.pem')
});

let wsList = [];

server.on('upgrade', function (request) {

    // upgrade WebSocket
    const websocket = createWebSocket({ request });

    // has WebSocket, the handshake is done
    if (websocket) {

        // inserts a WebSocket from the list
        wsList.push(websocket);

        // add listeners
        websocket
            .on('error', console.error)
            .on('open', function () {
                /* now you can send and receive messages */
            })
            .on('message', function (event) {
                // send to everyone
                wsList.forEach((ws) =&gt; { ws.send(event.data); });
            })
            .on('close', function () {
                // removing a WebSocket from the list
                wsList = wsList.filter(ws =&gt; ws !== websocket);
            });
    } else {

        // handshake not accepted
        request.destroy();
    }
});
</code></pre>
<h2 id="websocket">WebSocket</h2>
<p>The <code>WebSocket</code> interface is the main interface for the WebSocket API.</p>
<p>It base the <a href="https://nodejs.org/docs/latest/api/events.html"><code>EventEmitter</code></a>.</p>
<h3 id="create-of-websocket">Create of WebSocket</h3>
<p><strong>create new instance:</strong> <code>createWebSocket(options)</code> Returns a newly created WebSocket object.</p>
<p>method parameters:</p>
<ul>
<li><strong>parameter:</strong> <code>options</code> Type <code>object</code>.
<ul>
<li><code>isDebug</code> Value type <code>boolean</code>. If set to <code>true</code>, more info in console. Default <code>false</code>.</li>
<li><code>request</code> Value type <code>http.IncomingMessage</code> or <code>http.ClientRequest</code>. Reference (role of server <a href="https://nodejs.org/docs/latest/api/http.html#class-httpincomingmessage">http.IncomingMessage</a>) or (role of client <a href="https://nodejs.org/docs/latest/api/http.html#class-httpclientrequest">http.ClientRequest</a>)</li>
<li><code>headers</code> Value type <code>object</code>. Key-value pairs of header names and values. Header names are lower-cased. Default <code>request.headers</code>.</li>
<li><code>socket</code> Value type <code>net.Socket</code>. This class is an abstraction of a TCP socket or a streaming IPC endpoint. Default <code>request.socket</code>.</li>
<li><code>protocol</code> Value type <code>string</code>. The <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#subprotocols">sub-protocol</a> selected by the server. Default empty string.</li>
<li><code>origin</code> Value type <code>string</code>. String or validation function <code>(origin:string)=&gt;boolean</code>. Default empty string.</li>
<li><code>heartbeatInterval_ms</code> Value type <code>number</code>. The interval after which ping pong takes place. Default <code>30000</code>.</li>
<li><code>extension</code> Value type <code>Extension | null</code>. WebSocket selected extensions or <code>null</code>. Default <code>permessage-deflate</code>.</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong><a href="./permessage-deflate.js">permessage-deflate</a></strong> is a WebSocket extension that allows messages to be compressed before being sent over the network.
This can significantly reduce the amount of data transmitted, especially for large messages or messages with repetitive content, improving performance and reducing bandwidth usage.</p>
<p><strong>Benefits of permessage-deflate:</strong></p>
<ol>
<li><strong>Reduced Bandwidth Usage:</strong> Compressing messages can lower the amount of data sent over the network, which is particularly beneficial for applications with limited bandwidth.</li>
<li><strong>Improved Performance:</strong> Smaller message sizes can lead to faster transmission times, enhancing the overall performance of real-time applications.</li>
<li><strong>Cost Savings:</strong> Lower bandwidth usage can result in cost savings, especially for applications that handle a large volume of data.</li>
</ol>
</blockquote>
<h3 id="static-properties-of-websocket">Static properties of WebSocket</h3>
<ul>
<li><strong>property:</strong> <code>WebSocket.CONNECTING</code> Value <code>0</code>. The connection is not yet open.</li>
<li><strong>property:</strong> <code>WebSocket.OPEN</code> Value <code>1</code>. The connection is open and ready to communicate.</li>
<li><strong>property:</strong> <code>WebSocket.CLOSING</code> Value <code>2</code>. The connection is in the process of closing.</li>
<li><strong>property:</strong> <code>WebSocket.CLOSED</code> Value <code>3</code>. The connection is closed.</li>
</ul>
<h3 id="instance-properties-of-websocket">Instance properties of WebSocket</h3>
<ul>
<li><strong>property:</strong> <code>ws.readyState</code> Value <code>0 | 1 | 2 | 3</code>.
The connection <a href="#ready-state-constants">state</a>.</li>
<li><strong>property:</strong> <code>ws.protocol</code> Value type <code>string</code>.
Returns the name of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#subprotocols">sub-protocol</a>
the server selected; this will be one of the strings specified in the protocols
parameter when creating the WebSocket object, or the empty string if no connection is established.</li>
<li><strong>property:</strong> <code>ws.path</code> Value type <code>string</code>.</li>
<li><strong>property:</strong> <code>ws.url</code> Value type <code>string</code>.</li>
<li><strong>property:</strong> <code>ws.origin</code> Value type <code>string</code>.</li>
<li><strong>property:</strong> <code>ws.heartbeatInterval_ms</code> Value type <code>number</code>.</li>
<li><strong>property:</strong> <code>ws.ip</code> Value type <code>string</code>. IP address</li>
<li><strong>property:</strong> <code>ws.port</code> Value type <code>number</code>. Port number</li>
<li><strong>property:</strong> <code>ws.latency_ms</code> Value type <code>number</code>.
Latency describes the amount of delay on a network or Internet connection.
Low latency implies that there are no or almost no delays.
High latency implies that there are many delays.
One of the main aims of improving performance is to reduce latency.</li>
</ul>
<h3 id="instance-methods-of-websocket">Instance methods of WebSocket</h3>
<ul>
<li><strong>method:</strong> <code>ws.close()</code> Returns <code>undefined</code>. Closes the connection.</li>
<li><strong>method:</strong> <code>ws.heartbeat(callback:(latency_ms:number)=&gt;void)</code> Returns <code>undefined</code>.
Initiates a ping-pong procedure by measuring its time.</li>
<li><strong>method:</strong> <code>ws.send(data)</code> Returns <code>undefined</code>.
Send <code>data</code> through the connection.
This method throws an error if the ready state is <code>CONNECTING</code>.</li>
<li><strong>method:</strong> <code>ws.sendPing(data)</code> Returns <code>undefined</code>.
Send <code>ping</code> through the connection.
This method throws an error if the ready state is <code>CONNECTING</code>.</li>
<li><strong>method:</strong> <code>ws.sendPong(data)</code> Returns <code>undefined</code>.
Send <code>pong</code> through the connection.
This method throws an error if the ready state is <code>CONNECTING</code>.</li>
</ul>
<h3 id="events-of-websocket">Events of WebSocket</h3>
<ul>
<li><p><strong>event:</strong> <code>'close'</code> Fired when a connection with a <code>WebSocket</code> is closed.
Also available via the <code>onclose</code> property</p>
<p>Event type <code>object</code>.</p>
<p>Event properties:</p>
<ul>
<li><code>code</code> Returns an unsigned short containing
the close <a href="https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent/code">code</a>
sent by the server.</li>
<li><code>reason</code> Returns a string indicating the reason the server closed the connection.
This is specific to the particular server and sub-protocol.</li>
<li><code>wasClean</code> Returns a boolean value that Indicates whether or not the connection was cleanly closed.</li>
</ul>
</li>
<li><p><strong>event:</strong> <code>'error'</code> Fired when a connection with a <code>WebSocket</code> has been closed because of an error,
such as when some data couldn't be sent.
Also available via the <code>ws.onerror</code> property.</p>
<p>Event type <code>Error</code>.</p>
</li>
<li><p><strong>event:</strong> <code>'message'</code> Fired when data is received through a <code>WebSocket</code>.
Also available via the <code>onmessage</code> property.</p>
<p>Event type <code>object</code>.</p>
<p>Event properties:</p>
<ul>
<li><code>data</code> The data sent by the message emitter.</li>
<li><code>isBinary</code> Specifies whether the message is binary or not.</li>
</ul>
</li>
<li><p><strong>event:</strong> <code>'open'</code> Fired when a connection with a <code>WebSocket</code> is opened.
Also available via the <code>onopen</code> property.</p>
<p>Event type <code>undefined</code>.</p>
</li>
<li><p><strong>event:</strong> <code>'ping'</code> Fired when ping is received through a <code>WebSocket</code>.
Also available via the <code>onping</code> property.</p>
<p>Event type <code>object</code>.</p>
<p>Event properties:</p>
<ul>
<li><code>data</code> The data sent by the message emitter.</li>
</ul>
</li>
<li><p><strong>event:</strong> <code>'pong'</code> Fired when pong is received through a <code>WebSocket</code>.
Also available via the <code>onpong</code> property.</p>
<p>Event type <code>object</code>.</p>
<p>Event properties:</p>
<ul>
<li><code>data</code> The data sent by the message emitter.</li>
<li><code>latency_ms</code> Latency describes the amount of delay on a network or Internet connection.</li>
</ul>
</li>
</ul>
<h2 id="ready-state-constants">Ready state constants</h2>
<table>
<thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>CONNECTING</td>
<td>0</td>
<td>The connection is not yet open.</td>
</tr>
<tr>
<td>OPEN</td>
<td>1</td>
<td>The connection is open and ready to communicate.</td>
</tr>
<tr>
<td>CLOSING</td>
<td>2</td>
<td>The connection is in the process of closing.</td>
</tr>
<tr>
<td>CLOSED</td>
<td>3</td>
<td>The connection is closed.</td>
</tr>
</tbody>
</table>
<h2 id="extension">Extension</h2>
<p>Extending the interface for <code>permessage-deflate</code> and <code>permessage-masking</code></p>
<h3 id="create-of-extension">Create of Extension</h3>
<p><strong>create new Extension:</strong> <code>createExtension([options])</code> Returns a newly created Extension object.</p>
<h3 id="instance-methods-of-extension">Instance methods of Extension</h3>
<ul>
<li><p><strong>method:</strong> <code>ext.init(ws)</code> Returns <code>undefined</code>.
Initialisation.</p>
<p>method parameters:</p>
<ul>
<li><strong>parameter:</strong> <code>ws</code> Type <a href="#websocket"><code>WebSocket</code></a>.</li>
</ul>
</li>
<li><p><strong>method:</strong> <code>ext.close(callback)</code> Returns <code>undefined</code>. Close extension.</p>
<p>method parameters:</p>
<ul>
<li><strong>parameter:</strong> <code>callback</code> Type <code>(error)=&gt;void</code>.</li>
</ul>
</li>
<li><p><strong>method:</strong> <code>ext.mask(frame, callback)</code> Returns <code>undefined</code>. Mask frame.</p>
<p>method parameters:</p>
<ul>
<li><strong>parameter:</strong> <code>frame</code> Type <a href="#frame"><code>Frame</code></a>.</li>
<li><strong>parameter:</strong> <code>callback</code> Type <code>(error, </code><a href="#frame"><code>Frame</code></a><code>)=&gt;void</code>. Returns <code>undefined</code>.</li>
</ul>
</li>
<li><p><strong>method:</strong> <code>ext.unmask(frame, callback)</code> Returns <code>undefined</code>. Unmask frame.</p>
<p>method parameters:</p>
<ul>
<li><strong>parameter:</strong> <code>frame</code> Type <a href="#frame"><code>Frame</code></a>.</li>
<li><strong>parameter:</strong> <code>callback</code> Type <code>(error, </code><a href="#frame"><code>Frame</code></a><code>)=&gt;void</code>. Returns <code>undefined</code>.</li>
</ul>
</li>
<li><p><strong>method:</strong> <code>ext.generateOffer(callback)</code> Returns <code>undefined</code>. Client generate offer.</p>
<p>method parameters:</p>
<ul>
<li><strong>parameter:</strong> <code>callback</code> Type <code>(error, extHeaderValue:string)=&gt;void</code>. Returns <code>undefined</code>.</li>
</ul>
</li>
<li><p><strong>method:</strong> <code>ext.activate(headers, callback)</code> Returns <code>undefined</code>. Client activate.</p>
<p>method parameters:</p>
<ul>
<li><strong>parameter:</strong> <code>headers</code> Type <code>[string]</code>.</li>
<li><strong>parameter:</strong> <code>callback</code> Type <code>(error, isActivate:boolean)=&gt;void</code>. Returns <code>undefined</code>.</li>
</ul>
</li>
<li><p><strong>method:</strong> <code>ext.generateResponse(headers, callback)</code> Returns <code>undefined</code>. Server generate response.</p>
<p>method parameters:</p>
<ul>
<li><strong>parameter:</strong> <code>headers</code> Type <code>[string]</code>.</li>
<li><strong>parameter:</strong> <code>callback</code> Type <code>(error, extHeaderValue:string)=&gt;void</code>. Returns <code>undefined</code>.</li>
</ul>
</li>
<li><p><strong>method:</strong> <code>ext.processIncomingMessage(frame, callback)</code> Returns <code>undefined</code>.</p>
<p>method parameters:</p>
<ul>
<li><strong>parameter:</strong> <code>frame</code> Type <a href="#frame"><code>Frame</code></a>.</li>
<li><strong>parameter:</strong> <code>callback</code> Type <code>(error, </code><a href="#frame"><code>Frame</code></a><code>)=&gt;void</code>. Returns <code>undefined</code>.</li>
</ul>
</li>
<li><p><strong>method:</strong> <code>ext.processOutgoingMessage(frame, callback)</code> Returns <code>undefined</code>.</p>
<p>method parameters:</p>
<ul>
<li><strong>parameter:</strong> <code>frame</code> Type <a href="#frame"><code>Frame</code></a>.</li>
<li><strong>parameter:</strong> <code>callback</code> Type <code>(error, </code><a href="#frame"><code>Frame</code></a><code>)=&gt;void</code>. Returns <code>undefined</code>.</li>
</ul>
</li>
<li><p><strong>method:</strong> <code>ext.processIncomingFrame(frame, callback)</code> Returns <code>undefined</code>.</p>
<p>method parameters:</p>
<ul>
<li><strong>parameter:</strong> <code>frame</code> Type <a href="#frame"><code>Frame</code></a>.</li>
<li><strong>parameter:</strong> <code>callback</code> Type <code>(error, </code><a href="#frame"><code>Frame</code></a><code>)=&gt;void</code>. Returns <code>undefined</code>.</li>
</ul>
</li>
<li><p><strong>method:</strong> <code>ext.processOutgoingFrame(frame, callback)</code> Returns <code>undefined</code>.</p>
<p>method parameters:</p>
<ul>
<li><strong>parameter:</strong> <code>frame</code> Type <a href="#frame"><code>Frame</code></a>.</li>
<li><strong>parameter:</strong> <code>callback</code> Type <code>(error, </code><a href="#frame"><code>Frame</code></a><code>)=&gt;void</code>. Returns <code>undefined</code>.</li>
</ul>
</li>
</ul>
<h2 id="frame">Frame</h2>
<p>The <code>Frame</code> interface represents a WebSocket frame.</p>
<p>Frame type <code>object</code>.</p>
<h3 id="instance-properties-of-frame">Instance properties of Frame</h3>
<ul>
<li><strong>property:</strong> <code>frame.isFin</code> Value type <code>boolean</code>.</li>
<li><strong>property:</strong> <code>frame.isRsv1</code> Value type <code>boolean</code>.</li>
<li><strong>property:</strong> <code>frame.isRsv2</code> Value type <code>boolean</code>.</li>
<li><strong>property:</strong> <code>frame.isRsv3</code> Value type <code>boolean</code>.</li>
<li><strong>property:</strong> <code>frame.opcode</code> Value type <code>boolean</code>.</li>
<li><strong>property:</strong> <code>frame.isMasked</code> Value type <code>boolean</code>.</li>
<li><strong>property:</strong> <code>frame.payloadLength</code> Value type <code>number</code>.</li>
<li><strong>property:</strong> <code>frame.maskingKey</code> Value type <code>[]</code>.</li>
<li><strong>property:</strong> <code>frame.payload</code> Value type <code>Buffer</code>.</li>
</ul>
<h2 id="license">License</h2>
<p>This project is licensed under the MIT License.</p>
<p>Copyright © 2024 Manuel Lõhmus</p>
<p><a href="https://www.paypal.com/donate?hosted_button_id=4DAKNYHBD9MNC"><img src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" alt="Donate" /></a></p>
<p>Donations are welcome and will go towards further development of this project.</p>
<br>
<br>
<br>
</div>
</div>
</div>

    <script>
        (function () {

            'use strict';

            var isIE = !!document.documentMode; // Detect IE

            if (!isIE) {

                var link, script;

                // bootstrap for styling (https://getbootstrap.com/)
                link = document.createElement('link');
                link.href = 'https://cdn.jsdelivr.net/npm/bootstrap@5/dist/css/bootstrap.min.css';
                link.rel = 'stylesheet';
                link.crossOrigin = 'anonymous';
                document.head.appendChild(link);
                script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/bootstrap@5/dist/js/bootstrap.bundle.min.js';
                script.crossOrigin = 'anonymous';
                document.head.appendChild(script);

                // prism syntax highlighter for code blocks (https://prismjs.com/)
                link = document.createElement('link');
                link.href = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css';
                link.rel = 'stylesheet';
                link.crossOrigin = 'anonymous';
                document.head.appendChild(link);
                script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js';
                script.crossOrigin = 'anonymous';
                document.head.appendChild(script);

                // list-group style for headers
                document.querySelectorAll('#list-headers a')
                    .forEach(function (a) { a.classList.add('list-group-item', 'list-group-item-action') });
            }
        })();
    </script>
</body>
</html>